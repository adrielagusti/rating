<mvc:View
    controllerName="blackseeds.ratings.controller.Collection"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.ui.unified"
    xmlns:core="sap.ui.core"
    displayBlock="true"
>
    <Page
        showHeader="false"
        class="sapUiContentPadding"
    >
        <subHeader>
            <Toolbar>
                <ToolbarSpacer />
                <Title text="Black Seeds Collection Application" />
                <ToolbarSpacer />
            </Toolbar>
        </subHeader>
        <content>
            <Panel class="sapUiTinyMarginBottom">
                <HBox justifyContent="SpaceBetween">
                    <Image
                        class="sapUiTinyMarginTopBottom"
                        src="./img/logo.png"
                        width="8rem"
                    />
                    <VBox
                        items="{ 
                                path: '/SpecimenStates',
                                sorter: {
                                        path: 'ID'
                                    } 
                                }"
                    >
                        <HBox justifyContent="End">
                            <ObjectStatus
                                active="true"
                                text="{description}"
                                state="{color}"
                                class=" sapUiTinyMarginTop sapUiTinyMarginEnd"
                            />
                            <ObjectStatus
                                active="true"
                                state="{color}"
                                icon="{icon}"
                                class=" sapUiTinyMarginTop"
                            />
                            <!-- <ObjectStatus
                                state="None"
                                class=""
                                icon="sap-icon://e-care"
                            /> -->
                            <!-- </VBox>
                        <VBox justifyContent="End"> -->
                        </HBox>
                        <!-- <HBox justifyContent="End" /> -->
                    </VBox>
                </HBox>
            </Panel>
            <Panel
                expanded="true"
                class="sapUiTinyMarginTop"
                visible="{= ${collectionModel>/mode} === 'grid' }"
            >
                <!-- <Image
                    src="http://localhost:4004/v2/black-seeds/Pictures(guid'd8096b21-0479-49c8-b476-bdbe2d8c0a3e')/$value"
                /> -->
                <u:FileUploader
                    id="fileUploader"
                    name="myFileUpload"
                    uploadUrl="/v2/black-seeds/Media"
                    tooltip="Upload your file to the local server"
                    uploadComplete="handleUploadComplete"
                />
                <Button
                    text="Upload File"
                    press="handleUploadPress"
                />

                <List
                    id='list'
                    items="{
                        path: '/Specimens',
                        sorter: {
                            path: 'strainName'
                        }
                    }"
                    mode="MultiSelect"
                    selectionChange="onSelectionChange"
                >
                    <!-- group: true -->
                    <headerToolbar>
                        <OverflowToolbar>
                            <content>
                                <ObjectStatus
                                    text="{= ${collectionModel>/selectedSpecimens}.length }"
                                    icon="sap-icon://checklist-item"
                                />
                                <ToolbarSpacer />
                                <ToolbarSpacer />
                                <Button
                                    icon="sap-icon://multiselect-all"
                                    press="onSelectAction('all',$event)"
                                />
                                <Button
                                    icon="sap-icon://multiselect-none"
                                    press="onSelectAction('none',$event)"
                                />
                                <Button
                                    text="Display"
                                    icon="sap-icon://display"
                                    visible="{= ${collectionModel>/selectedSpecimens}.length === 1 }"
                                    press="onDisplay"
                                />
                                <Button
                                    text="Water"
                                    icon="sap-icon://blur"
                                    visible="{= ${collectionModel>/selectedSpecimens}.length >= 1 }"
                                    press="onApplication"
                                />

                                <Button
                                    text="Change status"
                                    icon="sap-icon://electronic-medical-record"
                                    visible="{= ${collectionModel>/selectedSpecimens}.length >= 1 }"
                                    press="onChangeStatus"
                                />
                                <Button
                                    text="Leave a note"
                                    icon="sap-icon://notes"
                                    visible="{= ${collectionModel>/selectedSpecimens}.length >= 1 }"
                                />
                                <Button
                                    text="{= ${collectionModel>/selectedSpecimens}.length >= 1 ? 'Add new specimens' : 'Add' }"
                                    icon="sap-icon://add"
                                    press="onAddSpecimen"
                                />
                            </content>
                        </OverflowToolbar>
                    </headerToolbar>
                    <InputListItem label="{strainName} - {tagID} ">
                        <!-- <Title title="{specimenName}"/> -->
                        <ObjectStatus
                            icon="{ parts: [ 'lastCare','stateIcon'], formatter: '.formatter.showWarning' }"
                            state="{ parts: [ 'lastCare','stateColor'], formatter: '.formatter.showWarningColor' }"
                        />

                        <ObjectStatus
                            icon="{stateIcon}"
                            state="{stateColor}"
                        />

                        <!-- <ObjectStatus
                           
                            text="{tagID}"
                        /> -->
                        <!-- <CheckBox /> -->
                    </InputListItem>
                </List>
            </Panel>
            <Panel
                expanded="true"
                class="sapUiTinyMarginTop"
                visible="{= ${collectionModel>/mode} === 'tree' }"
            >
                <IconTabBar
                    expanded="true"
                    expandable="false"
                    class="sapUiResponsiveContentPadding"
                    items="{dataModel>/currentStrains}"
                >
                    <items>
                        <IconTabFilter text="{dataModel>name}">
                            <Tree
                                items="{
                                    path: 'dataModel>treeSpecimens',
                                    templateShareable: true
                                }"
                            >
                                <StandardTreeItem
                                    title="{dataModel>name}"
                                    icon="{dataModel>stateIcon}"
                                />
                            </Tree>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
            </Panel>
        </content>
        <footer>
            <Toolbar>
                <Button
                    icon="sap-icon://e-care"
                    type="Transparent"
                    press="onBroBack"
                />
                <ToolbarSpacer />
                <SegmentedButton
                    selectedKey="{collectionModel>/mode}"
                    width="70%"
                >
                    <items>
                        <SegmentedButtonItem
                            text="Hierarchy"
                            key="tree"
                        />
                        <SegmentedButtonItem
                            text="List"
                            key="grid"
                        />
                    </items>
                </SegmentedButton>
                <ToolbarSpacer />
            </Toolbar>
        </footer>
    </Page>
</mvc:View>
