<mvc:View
    controllerName="blackseeds.ratings.controller.Main"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:micro="sap.ui.comp.smartmicrochart"
    displayBlock="true"
    xmlns:tnt="sap.tnt"
>
    <App id="app">
        <Page
            showHeader="false"
            class="sapUiContentPadding"
        >
            <subHeader>
                <Toolbar>
                    <ToolbarSpacer />
                    <Title text="Black Seeds Ratings Application" />
                    <ToolbarSpacer />
                </Toolbar>
            </subHeader>
            <content>
                <Panel class="sapUiTinyMarginBottom">
                    <HBox justifyContent="SpaceBetween">
                        <Image
                            class="sapUiTinyMarginTopBottom"
                            src="./img/logo.png"
                            width="6rem"
                        />

                        <ObjectStatus
                            text="{dataModel>/tested}"
                            state="Success"
                            class="sapMObjectStatusLarge sapUiMediumMarginTop"
                            icon="sap-icon://sys-enter-2"
                        />

                        <ObjectStatus
                            text="{dataModel>/total}"
                            state="None"
                            class="sapMObjectStatusLarge sapUiMediumMarginTop"
                            icon="sap-icon://e-care"
                        />
                    </HBox>
                </Panel>

                <Panel
                    expanded="true"
                    class="sapUiTinyMarginTop"
                    visible="{= ${appModel>/mode} === 'top' }"
                >
                    <f:GridList
                        id="grid-toptier"
                        mode="SingleSelectMaster"
                        growing="true"
                        items="{path: '/Strains', sorter: { path: 'totalPoints', descending: true } }"
                        selectionChange="onSelectRowTop"
                    >
                        <f:customLayout>
                            <grid:GridBoxLayout boxWidth="100%" />
                        </f:customLayout>

                        <f:GridListItem type="Active">
                            <!-- <FlexBox
                          
                            > -->
                            <VBox>
                                <HBox justifyContent="SpaceBetween">
                                         <ObjectStatus
                                        text="{name}"
                                        class="sapMObjectStatusLarge sapUiTinyMarginBegin"
                                    />
                                    <Title
                                        text="{tagID}"
                                        class="sapUiTinyMargin"
                                    />
                           
                                </HBox>
                                <VBox alignItems="Center">
                                <RatingIndicator
                                    maxValue="15"
                                    value="{ path:'totalPoints' }"
                                    class="sapUiTinyMarginEnd"
                                    enabled="false"
                                    iconSize="17px"
                                />
                            </VBox>
                            </VBox>
                            <!-- </FlexBox> -->
                        </f:GridListItem>
                    </f:GridList>
                </Panel>
                <Panel
                    expanded="true"
                    class="sapUiTinyMarginTop"
                    visible="{= ${appModel>/mode} === 'rate' }"
                >
                    <f:GridList
                        mode="SingleSelectMaster"
                        items="{path: 'dataModel>/strains', sorter: { path: 'dataModel>name', group: '.getName' } }"
                        selectionChange="onSelectRow"
                    >
                        <f:customLayout>
                            <grid:GridBoxLayout boxWidth="30%" />
                        </f:customLayout>

                        <f:GridListItem type="Active">
                            <FlexBox
                                justifyContent="SpaceBetween"
                                alignContent="Center"
                                alignItems="Center"
                            >
                                <FlexBox
                                    justifyContent="Start"
                                    alignContent="Start"
                                    alignItems="Start"
                                    class="sapUiTinyMarginTop"
                                >
                                    <ObjectStatus
                                        class="sapUiSmallMargin sapUiMediumMarginBegin"
                                        text="{dataModel>tagID}"
                                        icon="{= ${dataModel>isRated} === false ? 'sap-icon://e-care' : 'sap-icon://sys-enter-2' }"
                                        state="{= ${dataModel>isRated} === true ? 'Success' : 'None' }"
                                    />
                                </FlexBox>
                            </FlexBox>
                        </f:GridListItem>
                    </f:GridList>
                </Panel>
            </content>
            <footer>
                <Toolbar>
                    <Button
                        icon="sap-icon://e-care"
                        type="Transparent"
                    />
                    <ToolbarSpacer />

                    <SegmentedButton
                        selectedKey="{appModel>/mode}"
                        width="70%"
                    >
                        <items>
                            <SegmentedButtonItem
                                text="Rate"
                                icon="sap-icon://favorite"
                                key="rate"
                            />
                            <SegmentedButtonItem
                                text="Top tier"
                                icon="sap-icon://competitor"
                                key="top"
                            />
                        </items>
                    </SegmentedButton>
                    <ToolbarSpacer />
                    <Select
                        forceSelection="false"
                        selectedKey="{userSelectionModel>/Strains}"
                        type="IconOnly"
                        icon="sap-icon://filter"
                        autoAdjustWidth="true"
                        items="{
						path: '/Strains',
						sorter: { path: 'tagID' }
					}"
                        change="onSelectNav"
                    >
                        <core:Item
                            key="{ID}"
                            text="{tagID} - {name} "
                        />
                    </Select>
                </Toolbar>
            </footer>
        </Page>
    </App>
</mvc:View>
