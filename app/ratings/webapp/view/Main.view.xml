<mvc:View
    controllerName="blackseeds.ratings.controller.Main"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:micro="sap.ui.comp.smartmicrochart"
    displayBlock="true"
>
    <App id="app">
        <Page
            showHeader="false"
            class="sapUiContentPadding"
        >
            <subHeader>
                <Toolbar>
                    <ToolbarSpacer />
                    <Title text="Black Seeds Ratings Application" />
                    <ToolbarSpacer />
                </Toolbar>
            </subHeader>
            <content>
                <Panel class="sapUiTinyMarginBottom">
                    <HBox justifyContent="SpaceBetween">
                        <Image
                            class="sapUiTinyMarginTopBottom"
                            src="./img/logo.png"
                            width="7rem"
                        />
                        <VBox
                            justifyContent="End"
                            alignContent="End"
                            alignItems="End"
                        >
                            <Select
                                selectedKey="{loggedUser>/GUID}"
                                items="{/Users}"
                                forceSelection="true"
                                change="onUserChange"
                                class="sapUiMediumMarginBottom"
                            >
                                <core:Item
                                    key="{GUID}"
                                    text="{name}"
                                />
                            </Select>
                            <ObjectStatus
                                title="Rated"
                                text="{dataModel>/tested} / {dataModel>/total}"
                                state="Success"
                                class="sapMObjectStatusLarge"
                                icon="sap-icon://e-care"
                            />
                        </VBox>
                    </HBox>
                </Panel>

                <Panel
                    expanded="false"
                    expandable="true"
                    headerText="Top tier ranking"
                >
                    <f:GridList
                        id="grid-toptier"
                        mode="SingleSelectMaster"
                        growingThreshold="5"
                        growing="true"
                        items="{path: 'dataModel>/strains', sorter: { path: 'value', descending: true } }"
                    >
                        <f:customLayout>
                            <grid:GridBoxLayout boxWidth="100%" />
                        </f:customLayout>

                        <f:GridListItem type="Active">
                            <FlexBox
                                justifyContent="SpaceBetween"
                                alignContent="Center"
                                alignItems="Center"
                            >
                               <Label text="({dataModel>tagID})" class="sapUiTinyMarginBeginEnd" />
                                <Title
                                    text="{dataModel>name}"
                                    class="sapUiTinyMarginTopBottom sapUiTinyMarginBegin"
                                />
                                <!-- <Text
                                text="Black Seeds"
                                class="sapUiTinyMarginTopBottom sapUiTinyMarginEnd"
                            /> -->
                                <!-- </FlexBox>
                        <FlexBox
                            justifyContent="Center"
                            alignContent="Center"
                            alignItems="Center"
                        > -->
                                <RatingIndicator
                                    maxValue="5"
                                    value="{ path:'dataModel>value' }"
                                    class="sapUiTinyMarginEnd"
                                    enabled="false"
                                    iconSize="22px"
                                />
                            </FlexBox>
                        </f:GridListItem>
                    </f:GridList>
                </Panel>
                <Panel
                    expanded="true"
                    class="sapUiTinyMarginTop"
                    headerText="Strains to rate"
                >
                    <f:GridList
                        id="grid-reasons"
                        mode="SingleSelectMaster"
                        items="{path: 'dataModel>/strains', sorter: { path: 'dataModel>name' } }"
                        selectionChange="onSelectRow"
                    >
                        <!-- items="{path: 'dataModel>/strains', sorter: { path: 'dataModel>name', group: '.getName' } }" -->
                        <f:customLayout>
                            <grid:GridBoxLayout boxWidth="100%" />
                        </f:customLayout>

                        <f:GridListItem type="Active">
                            <FlexBox
                                justifyContent="SpaceBetween"
                                alignContent="Center"
                                alignItems="Center"
                            >
                                <FlexBox
                                    justifyContent="Start"
                                    alignContent="Start"
                                    alignItems="Start"
                                    class="sapUiTinyMarginTop"
                                >
                                    <Label text="({dataModel>tagID})" class="sapUiTinyMarginBeginEnd" />
                                    <Title text="{dataModel>name}" />
                                </FlexBox>
                                <!-- <RatingIndicator
                                    maxValue="1"
                                    value="1"
                                    class="sapUiTinyMarginBegin sapUiTinyMarginEnd"
                                    enabled="false"
                                    iconSize="22px"
                                    visible="{= ${dataModel>value} > 0 }"
                                /> -->
                                <core:Icon src="sap-icon://accept" visible="{= ${dataModel>value} > 0 }" 	 class="sapUiTinyMarginEnd" color="#64E4CE"/>

                                <!-- <Text
                                    text="Breeder?"
                                    class="sapUiTinyMarginTopBottom sapUiTinyMarginEnd"
                                /> -->
                                <!-- </FlexBox>
                            <FlexBox
                                justifyContent="Center"
                                alignContent="Center"
                                alignItems="Center"
                            > -->
                            </FlexBox>
                        </f:GridListItem>
                    </f:GridList>
                </Panel>
                <!-- <List
                    id="idList"
                    items="{/Strains}"
                    selectionChange="onSelectRow"
                    mode="SingleSelectMaster"
                    growing="true"
                    growingThreshold="50"
                    includeItemInSelection="true"
                >
                    <CustomListItem
                        press="onSelectRow"
                        type="Active"
                        detailPress="onSelectRow"
                    >
                        <FlexBox
                            justifyContent="SpaceBetween"
                            alignContent="Center"
                            alignItems="Center"
                        >
                            <VBox>
                                <Title
                                    text="({tagID}) {name}"
                                    class="sapUiSmallMarginTopBottom"
                                />
                                <Text
                                    text="Add breeder"
                                    class="sapUiSmallMarginBottom"
                                />
                            </VBox>
                            <RatingIndicator
                                maxValue="5"
                                value="{value}"
                            />
                        </FlexBox>
                    </CustomListItem>
                </List> -->
            </content>
            <footer>
                <Toolbar>
                    <ToolbarSpacer />
                    <Select
                        forceSelection="false"
                        selectedKey="{userSelectionModel>/Strains}"
                        type="IconOnly"
                        icon="sap-icon://filter"
                        autoAdjustWidth="true"
                        items="{
						path: '/Strains',
						sorter: { path: 'name' }
					}"
                    >
                        <core:Item
                            key="{stainID}"
                            text="{name}"
                        />
                    </Select>
                </Toolbar>
            </footer>
        </Page>
    </App>
</mvc:View>
